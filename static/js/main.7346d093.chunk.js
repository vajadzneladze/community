(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(47)},25:function(e,t,a){},26:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),o=a.n(i),s=(a(24),a(25),a(2)),c=a(3),l=a(5),u=a(4),m=a(6),d=(a(26),a(7)),p=a(9),h=a(17),f=a.n(h),g=(a(46),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={inputs:{email:{name:"email",type:"email",label:"Email",placeholder:"Email",value:"",error:{valid:!0,message:"Email required"},validation:{required:!0,isEmail:!0}},password:{name:"password",type:"password",label:"Password",placeholder:"Password",value:"",error:{valid:!0,message:"Password is not valid"},validation:{required:!0,minLength:6}}}},a.checkValidity=function(e,t){var n=!0;if(!t)return!0;if(t.minLength&&(n=e.length>=t.minLength&&n),t.required&&(n=""!==e.trim()&&n),t.isEmail){n=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n}return a.status.disabled=n?null:"disabled",n},a.inputChangeHandler=function(e,t){var n=Object(p.a)({},a.state.inputs,Object(d.a)({},t,Object(p.a)({},a.state.inputs[t],{value:e.target.value,error:{valid:a.checkValidity(e.target.value,a.state.inputs[t].validation),message:a.state.inputs[t].error.message}})));a.setState({inputs:n})},a.submitHandler=function(e){e.preventDefault(),a.signIn(a.state.inputs.email.value,a.state.inputs.password.value)},a.signIn=function(e,t){var n="client_id=2&client_secret=aW9cf1Oke0p9iPPD9SjMCsFlXd5HfuhrLmjv1QHA&grant_type=password&password="+t+"&username="+e;f.a.post("http://tsu.creativestudio.ge/oauth/token",n,{headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){localStorage.setItem("accessToken",e.data.access_token),a.props.checkAuth(!0)}).catch(function(e){a.props.checkAuth(!1)})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[];for(var a in this.state.inputs)t.push({id:a,config:this.state.inputs[a]});var n=t.map(function(t){return r.a.createElement("div",{className:"form-group has-error",key:t.id},r.a.createElement("input",{type:t.config.type,className:"form-control "+(t.config.error.valid?null:"is-invalid"),value:t.config.value,name:t.config.name,onChange:function(a){return e.inputChangeHandler(a,t.config.name)},id:t.config.name,"aria-describedby":"emailHelp",placeholder:t.config.placeholder}),t.config.error.valid?null:r.a.createElement("span",{className:"help-block text-danger"},t.config.error.message))});return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"Auth",method:"post",onSubmit:this.submitHandler},r.a.createElement("h1",null,"Authorisation"),r.a.createElement("hr",null),n,r.a.createElement("button",{className:"btn btn-primary",ref:function(t){return e.status=t},disabled:this.status}," Submit "))))}}]),t}(n.Component)),v=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Home page"),r.a.createElement("button",{onClick:this.props.logOut},"Log out"))}}]),t}(n.PureComponent),b=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={accessToken:!1},a.logOut=function(){a.setState({accessToken:!1}),localStorage.removeItem("accessToken")},a.checkAuth=function(e){a.setState({accessToken:e})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({accessToken:!!localStorage.getItem("accessToken")})}},{key:"render",value:function(){var e=this.state.accessToken?r.a.createElement(v,{logOut:this.logOut}):r.a.createElement(g,{checkAuth:this.checkAuth});return r.a.createElement("div",{className:"App"},e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.7346d093.chunk.js.map